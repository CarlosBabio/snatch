<%= render "shared/navbar" %>


<% if @bikes.empty? %>

  <div class="no-search-result">
    <div class="box-center">
      <p class="oups">Oops.</p>
      <p class="no-result-text">We found no bikes for your search.</p>
      <%= image_tag "index/no-result.png", class: "no-result-img" %>
    </div>
  </div>

<% else %>

<div class="search-page">
  <div class="search-map">
      <div style="width: 100%; height: 100%;"
    data-controller="mapbox"
    data-mapbox-markers-value="<%= @markers.to_json %>"
    data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  </div>

  <div class="search-result">
    <div class="text-center">
      <h1>Snatch a bike near you</h1>
    </div>
    <% @bikes.each do |bike| %>
    <div class="bike-result-card">
      <div class="bike-result-image">
        <% if bike.photos.attached? %>
          <%= cl_image_tag bike.photos[0].key, class: "bike-img", width: "100%", height: "100%" %>
        <% else %>
          <img src="https://www.btklsby.go.id/images/placeholder/basic.png" width="100%" height="100%" alt="" class="bike-img">
        <% end %>
      </div>
      <div class="bike-result-info">
        <h2 class="bike-result-title"> <%= link_to bike.title, bike_path(bike) %> </h2>
        <p class="bike-result-desc"><%= bike.description.first(100) + "..." %></p>
        <p class="bike-result-address"><%= bike.address %></p>
        <p class="bike-result-price">$<%= bike.price_per_day %></p>
      </div>
    </div>
   <% end %>
  </div>

</div>

<% end %>
